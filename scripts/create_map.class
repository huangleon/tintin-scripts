#class {create_map} open;
#nop prepare the direction-abbr mappings

#list full_exits create {east;west;north;south;up;down;northwest;northeast;southeast;southwest;northdown;eastdown;southdown;westdown;northup;eastup;southup;westup};
#list abbr_exits create {e;w;n;s;u;d;nw;ne;se;sw;nd;ed;sd;wd;nu;eu;su;wu};
#alias {make_exit}
{
	#list full_exits find %1 i;
	#if { "$i" != "0" }
	{
		#map dig {$abbr_exits[$i]} {new};
	};
};
#act {^%W%s-}
{
	#unact {^%W -};
	#var room_name %1;
	#map set roomname $room_name;
	#map set roomsymbol $room_name;
	#map set roomcolor <acf>;
	#map set roomarea $map_area;
	#map set roomterrain $map_terrain;
	#nop #class {create_map} kill;
};
#nop 6 exits
#act {这里明显的出口是 %w、%w、%w、%w、%w 和 %w。}
{
	#forall {%1;%2;%3;%4;%5;%6}
	{
		make_exit &0;
	};
};
#nop 5 exits
#act {这里明显的出口是 %w、%w、%w、%w 和 %w。}
{
	#forall {%1;%2;%3;%4;%5}
	{
		make_exit &0;
	};
};
#nop 4 exits
#act {这里明显的出口是 %w、%w、%w 和 %w。}
{
	#forall {%1;%2;%3;%4}
	{
		make_exit &0;
	};
};
#nop 3 exits
#act {这里明显的出口是 %w、%w 和 %w。}
{
	#forall {%1;%2;%3}
	{
		make_exit &0;
	};
};
#nop 2 exits
#act {这里明显的出口是 %w 和 %w。}
{
	#forall {%1;%2}
	{
		make_exit &0;
	};
};
#nop 1 exits
#act {这里唯一的出口是 %w。}
{
	make_exit %1;
};
#class {create_map} close;